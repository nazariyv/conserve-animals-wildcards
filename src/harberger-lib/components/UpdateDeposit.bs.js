// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE

import * as Curry from "bs-platform/lib/es6/curry.js";
import * as React from "react";
import * as Web3Utils from "web3-utils";
import * as Belt_Option from "bs-platform/lib/es6/belt_Option.js";
import * as InputHelp$WildCards from "../InputHelp.bs.js";
import * as UpdateDepositInput from "./UpdateDepositInput";
import * as TxTemplate$WildCards from "../TxTemplate.bs.js";
import * as ContractActions$WildCards from "../eth/ContractActions.bs.js";

var make = UpdateDepositInput.default;

var UpdateDepositInput$1 = {
  make: make
};

function getToDisplay(label, value) {
  return label + (": " + Belt_Option.mapWithDefault(value, "loading", (function (a) {
                  return a;
                })));
}

function UpdateDeposit(Props) {
  var match = React.useState((function () {
          return "";
        }));
  var setDepositChange = match[1];
  var depositChange = match[0];
  var match$1 = React.useState((function () {
          return true;
        }));
  var setIsAddDeposit = match$1[1];
  var isAddDeposit = match$1[0];
  var match$2 = ContractActions$WildCards.useUpdateDeposit(undefined);
  var depositFunc = match$2[0];
  var match$3 = ContractActions$WildCards.useWithdrawDeposit(undefined);
  var withdrawFunc = match$3[0];
  var onSubmitDepositChange = function ($$event) {
    $$event.preventDefault();
    var depositChangeWei = Web3Utils.toWei(depositChange, "ether");
    if (isAddDeposit) {
      return Curry._1(depositFunc, depositChangeWei);
    } else {
      return Curry._1(withdrawFunc, depositChangeWei);
    }
  };
  var updateDepositChange = function ($$event) {
    $$event.preventDefault();
    return InputHelp$WildCards.onlyUpdateIfPositiveFloat(depositChange, setDepositChange, $$event);
  };
  var updateIsAddDeposit = function (isDeposit) {
    return Curry._1(setIsAddDeposit, (function (param) {
                  return isDeposit;
                }));
  };
  return React.createElement(TxTemplate$WildCards.make, {
              children: React.createElement(TxTemplate$WildCards.make, {
                    children: React.createElement(make, {
                          depositChange: depositChange,
                          updateDepositChange: updateDepositChange,
                          isAddDeposit: isAddDeposit,
                          updateIsAddDeposit: updateIsAddDeposit,
                          onSubmitDepositChange: onSubmitDepositChange
                        }),
                    txState: match$2[1]
                  }),
              txState: match$3[1]
            });
}

var make$1 = UpdateDeposit;

export {
  UpdateDepositInput$1 as UpdateDepositInput,
  getToDisplay ,
  make$1 as make,
  
}
/* make Not a pure module */
